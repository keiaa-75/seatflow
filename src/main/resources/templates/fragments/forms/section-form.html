<th:block xmlns:th="http://www.thymeleaf.org" th:fragment="form">
    <th:block th:insert="~{fragments/title-card :: titleCard(${structure.id == null ? 'Create Section' : 'Edit details'}, true, ${structure.id == null ? '/sections' : '/sections/' + structure.id})}"></th:block>

    <div th:insert="~{fragments/notifications :: notifications}"></div>

    <section class="section">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-8">
                    <div class="box">
                        <form id="section-form" th:action="${structure.id == null ? '/sections/new' : '/sections/' + structure.id + '/edit'}" method="post" th:object="${structure}">
                        <div class="field">
                            <label class="label">Grade level*</label>
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select th:field="*{gradeLevel}" required>
                                        <option value="" disabled>Select grade level</option>
                                        <option th:each="level : ${T(com.xinnsuu.seatflow.model.enums.GradeLevel).values()}"
                                                th:value="${level}"
                                                th:text="${level.displayValue}">11</option>
                                    </select>
                                </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Strand*</label>
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select th:field="*{strand}" required>
                                <option value="" disabled>Select strand</option>
                                <option th:each="strand : ${T(com.xinnsuu.seatflow.model.enums.Strand).values()}"
                                        th:value="${strand}"
                                        th:text="${#strings.replace(strand, '_', ' ')}">STEM</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Section name</label>
                    <div class="control">
                        <input type="text" class="input" th:field="*{sectionName}" placeholder="Enter section name...">
                    </div>
                </div>

                <div class="field is-grouped mt-5">
                    <div class="control">
                        <button type="submit" class="button is-primary">Save</button>
                    </div>
                    <div class="control" th:if="${structure.id != null}">
                        <button type="button" class="button is-danger" id="delete-section-btn">Delete</button>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal" id="delete-modal">
        <div class="modal-background"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title">Delete Section</p>
                <button class="delete" aria-label="close"></button>
            </header>
            <section class="modal-card-body">
                <p>Are you sure you want to delete this section? This action cannot be undone.</p>
            </section>
            <footer class="modal-card-foot">
                <form th:action="@{/sections/delete/{id}(id=${structure.id})}" method="post">
                    <button type="submit" class="button is-danger">Delete</button>
                </form>
                <button class="button modal-cancel">Cancel</button>
            </footer>
        </div>
    </div>
        </div>
    </div>
</section>
</th:block>
